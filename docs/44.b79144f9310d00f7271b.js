webpackJsonp([44],{"7J66":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\n<template>\n   <div>\n      <t-search-form :cells=\"cells\"  @filterchange=\"filterChange\"></t-search-form>\n      <vue-table ref=\"table\"\n         id-key=\"id\"\n         :columns=\"columns\"\n         :fetch-api=\"queryDataList\"\n         :init-page-size=\"pageSize\">\n      </vue-table>\n   </div>\n</template>\n\n<script>\n  import { sGetDataList, sModifyData } from 'apis/demo'\n  import { dateFormat } from 'utils/utilFunc'\n  import message from 'components/message'\n\n  export default {\n    data () {\n      return {\n        pageSize: '10',\n        columns: [\n          { title: 'ID', width: '70', dataKey: 'id' },\n          { title: '名称', width: '160', dataKey: 'name' },\n          { title: '值', minWidth: '10', dataKey: 'value' },\n          { title: '启用状态', minWidth: '100', dataKey: 'enable', render: { type: 'checkbox', action: this.handleEnableAction } },\n          { title: '创建时间', width: '180', dataKey: 'create_time', pFun: dateFormat },\n          { title: '描述', minWidth: '250', dataKey: 'description' },\n          { title: '操作', width: '150' }\n        ]\n      }\n    },\n    computed: {\n      cells () {\n        return {\n          name: {\n            label: '名称',\n            type: 'textfield',\n            attrs: {\n              placeholder: '名称'\n            }\n          },\n          enable: {\n            label: '状态',\n            type: 'dropdown',\n            attrs: {\n              placeholder: '请选择状态'\n            },\n            extra: {\n              options: [\n                { label: '全部', value: '' },\n                { label: '启用', value: 1 },\n                { label: '禁用', value: 2 }\n              ]\n            }\n          },\n          create_time: {\n            label: '创建时间',\n            type: 'rangedatepicker',\n            attrs: {\n              startPlaceholder: '有效开始时间',\n              endPlaceholder: '有效结束时间'\n            }\n          }\n        }\n      }\n    },\n    methods: {\n      queryDataList ({ $offset, $limit } = {}) {\n        return sGetDataList({\n          $count: true,\n          $offset: $offset || 0,\n          $limit: $limit || 20,\n          ...this.filterData\n        })\n      },\n      handleEnableAction (actionName, rowData, rowIndex, checked) {\n        sModifyData(rowData.id, {\n          enable: checked ? 1 : 2\n        }).catch(err => {\n          message.info('设置失败' + err.message)\n          rowData['enable'] = checked ? 2 : 1\n        })\n      },\n      filterChange (data) {\n        this.filterData = {\n          ...data,\n          begin_timestamp: data.create_time.startime,\n          end_timestamp: data.create_time.endtime\n        }\n        this.$refs.table.clearAndRefresh()\n      }\n    },\n    components: {\n    }\n  }\n<\/script>\n",e.exports=t.default},VEKQ:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=n("7J66"),r=a(l),s=n("jsiM"),d=n("DJXt"),o=n("WB2H"),c=a(o);t.default={data:function(){return{code:r.default,pageSize:"10",columns:[{title:"ID",width:"70",dataKey:"id"},{title:"名称",width:"160",dataKey:"name"},{title:"值",minWidth:"10",dataKey:"value"},{title:"启用状态",minWidth:"100",dataKey:"enable",render:{type:"checkbox",action:this.handleEnableAction}},{title:"创建时间",width:"180",dataKey:"create_time",pFun:d.dateFormat},{title:"描述",minWidth:"250",dataKey:"description"},{title:"操作",width:"150"}]}},computed:{cells:function(){return{name:{label:"名称",type:"textfield",attrs:{placeholder:"名称"}},enable:{label:"状态",type:"dropdown",attrs:{placeholder:"请选择状态"},extra:{options:[{label:"全部",value:""},{label:"启用",value:1},{label:"禁用",value:2}]}},create_time:{label:"创建时间",type:"rangedatepicker",attrs:{startPlaceholder:"有效开始时间",endPlaceholder:"有效结束时间"}}}}},methods:{queryDataList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.$offset,n=e.$limit;return(0,s.sGetDataList)(i({$count:!0,$offset:t||0,$limit:n||20},this.filterData))},handleEnableAction:function(e,t,n,a){(0,s.sModifyData)(t.id,{enable:a?1:2}).catch(function(e){c.default.info("设置失败"+e.message),t.enable=a?2:1})},filterChange:function(e){this.filterData=i({},e,{begin_timestamp:e.create_time.startime,end_timestamp:e.create_time.endtime}),this.$refs.table.clearAndRefresh()}},components:{}},e.exports=t.default},l5B8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("VEKQ"),i=n.n(a);for(var l in a)"default"!==l&&function(e){n.d(t,e,function(){return a[e]})}(l);var r=n("xzp5"),s=n("VU/8"),d=s(i.a,r.a,!1,null,null,null);t.default=d.exports},xzp5:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},[n("demo",{attrs:{title:"搜索表单",vertical:!0}},[n("div",{attrs:{slot:"demo"},slot:"demo"},[n("t-search-form",{attrs:{cells:e.cells},on:{filterchange:e.filterChange}}),e._v(" "),n("vue-table",{ref:"table",attrs:{"id-key":"id",columns:e.columns,"fetch-api":e.queryDataList,"init-page-size":e.pageSize}})],1),e._v(" "),n("div",{attrs:{slot:"desc"},slot:"desc"},[n("p",[e._v("搜索表单在配合表格实现搜索功能。")])]),e._v(" "),n("d-code",{attrs:{slot:"code",lang:"auto"},slot:"code"},[e._v(e._s(e.code))])],1)],1)},i=[],l={render:a,staticRenderFns:i};t.a=l}});